<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Vue 全局组件注册</title>
      <link href="/2025/09/30/20250930/"/>
      <url>/2025/09/30/20250930/</url>
      
        <content type="html"><![CDATA[<p>在写项目时遇到一个问题，先来看两段代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// search/index.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-container flex items-center px-[15px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-icon</span> <span class="attr">class</span>=<span class="string">&quot;search-icon cursor-pointer&quot;</span> <span class="attr">size</span>=<span class="string">&quot;18px&quot;</span> <span class="attr">color</span>=<span class="string">&quot;rgba(255, 255, 255, 0.5)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Search</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">class</span>=<span class="string">&quot;search-input bg-transparent w-[230px] h-[37px] pl-[10px] outline-none border-none font-size-[14px] text-white placeholder:text-white/50&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">:placeholder</span>=<span class="string">&quot;placeholderInfo.showKeyword&quot;</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;keywords&quot;</span> @<span class="attr">focus</span>=<span class="string">&quot;focusHandler&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      @<span class="attr">blur</span>=<span class="string">&quot;blurHandler&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-icon</span> <span class="attr">class</span>=<span class="string">&quot;clean-icon cursor-pointer&quot;</span> <span class="attr">size</span>=<span class="string">&quot;18px&quot;</span> <span class="attr">color</span>=<span class="string">&quot;rgba(255, 255, 255, 0.5)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:class</span>=<span class="string">&quot;&#123; visible: keywords &#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;keywords = &#x27;&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">CircleCloseFilled</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;suggest&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;showSuggest&quot;</span> <span class="attr">v-loading</span>=<span class="string">&quot;loading&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">list</span> <span class="attr">:list</span>=<span class="string">&quot;state.list&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;model&quot;</span> <span class="attr">:keywordsList</span>=<span class="string">&quot;state.keywordsList&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// search/list.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-list h-full overflow-hidden py-[20px] px-[10px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;model === &#x27;hot&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hot-list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hot-title mb-[10px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          热搜</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hot-list-item flex items-center cursor-pointer h-[60px]&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in props.list&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-index mr-[20px]&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; &#x27;top3&#x27;: index &lt; 3 &#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;&#123; index + 1 &#125;&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title flex items-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;name font-[600] text-[14px] mr-[5px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;&#123; item.searchWord &#125;&#125;</span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-if</span>=<span class="string">&quot;item.iconUrl&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;item.iconUrl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon size-[13px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;desc text-[11px] &quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              &#123;&#123; item.content &#125;&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;keyWords-list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;keyWords-item flex items-center cursor-pointer h-[60px]&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in props.keywordsList&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-icon</span> <span class="attr">size</span>=<span class="string">&quot;14px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;mr-[5px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Search</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;&#123; item.keyword &#125;&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>下面的的list是index所使用的局部组件，可以看到 这里都用上了<code>el-icon Search</code> 这个图标 但是在子组件里面渲染的是<code>index.vue</code>的内容 ，导致这样的现象是因为我使用了vue自动注册组件插件将 <code>src\component</code> 里面的组件都自动注册了全局组件，由于 <code>index.vue</code>的文件名是<code>search</code>导致后注册的组件覆盖了<code>element icon Search</code>所以导致了这里面渲染了<code>index.vue</code>的内容，这就导致我的疑问，为什么子组件调用时覆盖了，但是我在<code>index.vue</code>使用确是<code>element icon</code></p><p>首先我们来先了解一下vue组件的调用</p><p><code>首先vue会去找局部注册组件也就是import的</code></p><p><code>没找到就会去全局注册组件里面去找</code></p><p>这时vue的编辑器会有一个特殊机制去寻找一个不是组件本身但是同名的组件避免无限递归导致栈溢出， 由于我在<code>main.ts</code>里面注册了element的icon所以在list.vue里面没有达到我想要的效果，那解决这样的问题就很容易了将Search文件夹换名就行</p><p>x</p>]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>通过Map处理数据更新</title>
      <link href="/2025/09/18/20250918%E5%B7%A5%E4%BD%9C/"/>
      <url>/2025/09/18/20250918%E5%B7%A5%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>在处理列表新增时遇到一个这个问题，通过组件选中的数据来新增，已经勾选过的组件还是勾上的，带出的数据是选中的数据，这时就有问题你不能简单的通过将选中的数据push到一个数组里面就可以，当用户选了一个数据又再次勾选时，你会有重复数据，当用户取消勾选时你获取到的是空数组，也不能使用直接将选择出来的数组直接替代，如果用户有编辑数据会导致数据丢失影响体验，这个时候就需要使用Map数据结构来进行处理了</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">checkInspection</span>(<span class="params">checkNames, checkData</span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 首先 创建一个Map</span></span><br><span class="line">      <span class="keyword">const</span> existingMap = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">checkInspectionList</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.<span class="property">keypointItemId</span>) &#123;</span><br><span class="line">          <span class="comment">// 将列表里面的id为键 将数组进行保存</span></span><br><span class="line">          existingMap.<span class="title function_">set</span>(item.<span class="property">keypointItemId</span>, item);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 处理逻辑：</span></span><br><span class="line">      <span class="comment">// 1. 仅保留checkData中存在的项（自动删除缺失项）</span></span><br><span class="line">      <span class="comment">// 2. 对存在的项进行属性更新</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">checkInspectionList</span> = checkData.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; keypointItemId &#125; = item;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="comment">// 这块判断勾选的数据之前已经存在就将数据return出去</span></span><br><span class="line">        <span class="comment">// 复用并更新已有项（保持引用一致性）</span></span><br><span class="line">        <span class="keyword">if</span> (existingMap.<span class="title function_">has</span>(keypointItemId)) &#123;</span><br><span class="line">          <span class="keyword">const</span> existingItem = existingMap.<span class="title function_">get</span>(keypointItemId);</span><br><span class="line">          <span class="keyword">return</span> &#123; ...existingItem, ...item &#125;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 新增项初始化 </span></span><br><span class="line">        <span class="keyword">return</span> &#123; ...item, <span class="attr">isProblem</span>: <span class="number">0</span>, <span class="attr">isDelete</span>: <span class="number">1</span>, <span class="attr">delFlag</span>: <span class="number">0</span>, <span class="attr">problemType</span>: <span class="number">1</span>, &#125;;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><p>这块是直接对组件的数据进行map遍历，这样就做到了删除，更新的操作，<code>existingMap.has</code>存在则复用数据</p>]]></content>
      
      
      <categories>
          
          <category> 工作 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>daily</title>
      <link href="/daily/index.html"/>
      <url>/daily/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>link</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>music</title>
      <link href="/music/index-1.html"/>
      <url>/music/index-1.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>about</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>music</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[<p>111</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>work</title>
      <link href="/work/index.html"/>
      <url>/work/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
